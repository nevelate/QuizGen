<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             xmlns:uip="using:FluentAvalonia.UI.Controls.Primitives"
             xmlns:vm="using:QuizGen.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="QuizGen.Views.HomePageView"
             x:DataType="vm:HomePageViewModel">
  <Panel>
    <Grid RowDefinitions="auto, *">
      <Menu Grid.Row="0"
            Margin="4, 0, 0, 0">
        <MenuItem Header="Account">
          <MenuItem Header="Log out"/>
          <MenuItem Header="Exit"/>
        </MenuItem>

        <MenuItem Header="Settings">
          <MenuItem Header="Theme">
            <MenuItem Header="Default" ToggleType="Radio" IsChecked="True"/>
            <MenuItem Header="Light" ToggleType="Radio"/>
            <MenuItem Header="Dark" ToggleType="Radio"/>
          </MenuItem>
          <MenuItem Header="Backdrop">
            <MenuItem Header="None" ToggleType="Radio" />
            <MenuItem Header="Mica" ToggleType="Radio"/>
            <MenuItem Header="Acrylic" ToggleType="Radio"/>
            <MenuItem Header="Acrylic (accent)" ToggleType="Radio" IsChecked="True"/>
          </MenuItem>
        </MenuItem>

        <MenuItem Header="Help">
          <MenuItem Header="About"/>
          <MenuItem Header="Credits"/>
          <MenuItem Header="Contacts"/>
          <MenuItem Header="Report issue"/>
        </MenuItem>
      </Menu>
      <Grid Grid.Row="1"
            Margin="8, 0, 8, 8"
            RowDefinitions="auto, auto, auto, *">

        <!--Test select panel-->
        <Border Grid.Row="0"
                CornerRadius="4"
                Margin="4, 0, 0, 4"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
          <Grid ColumnDefinitions="*, auto"
                Margin="8">
            <TextBox Grid.Column="0"
                     Watermark="File location"
                     Text="{Binding FilePath}">

            </TextBox>
            <StackPanel Grid.Column="1"
                        Spacing="8"
                        Orientation="Horizontal">
              <Button Margin="8, 0, 0, 0"
                      Content="Open file"
                      Command="{Binding OpenFileCommand}"/>
              <ui:FAComboBox MinWidth="160"
                             VerticalAlignment="Stretch"
                             SelectedItem="{Binding TestParserName}"
                             ItemsSource="{Binding TestParsersNames}"/>
              <Button Content="Check"
                      Classes="accent"
                      Command="{Binding CheckTestsCommand}"/>
            </StackPanel>
          </Grid>
        </Border>

        <!--Test settings panel 1-->
        <Border Grid.Row="1"
                CornerRadius="4"
                Margin="4, 4, 0, 4"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
          <Grid ColumnDefinitions="auto, *, auto"
                RowDefinitions="auto, 8, auto"
                Margin="8">
            <TextBlock Grid.Column="0"
                       Grid.Row="0"
                       Text="Title:"
                       VerticalAlignment="Center"/>
            <TextBox Grid.Column="1"
                     Grid.Row="0"
                     Text="{Binding TestName}"
                     Margin="24, 0, 8, 0"/>
            <Button Grid.Column="2"
                    Grid.Row="0"
                    Content="i"
                    Name="InfoButton"
                    Click="ShowTeachingTip"/>

            <TextBlock Grid.Column="0"
                       Text="Description:"
                       Grid.Row="2"
                       VerticalAlignment="Center"/>
            <TextBox Grid.Column="1"
                     Grid.Row="2"
                     Grid.ColumnSpan="2"
                     Text="{Binding TestDescription}"
                     Margin="24, 0, 0, 0"/>
          </Grid>
        </Border>

        <!--Test settings panel 2-->
        <Border Grid.Row="2"
                CornerRadius="4"
                Margin="4, 4, 0, 4"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
          <Grid RowDefinitions="auto, 8, auto, 8, auto, 8, auto, auto"
                ColumnDefinitions="auto, auto, *"
                Margin="8">
            <TextBlock Grid.Row="0"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Text="Range:"/>
            <ui:FAComboBox Grid.Column="1"
                           Grid.Row="0"
                           Name="testRangeTypeCombo"
                           SelectedIndex="{Binding TestRangeType}"
                           Margin="24, 0, 8, 0"
                           MinWidth="100">
              <ui:FAComboBoxItem>All</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>Custom</ui:FAComboBoxItem>
            </ui:FAComboBox>
            <StackPanel Grid.Column="2"
                        Grid.Row="0"
                        Spacing="8"
                        Margin="32, 0, 0, 0"
                        Orientation="Horizontal"
                        IsVisible="{Binding !!#testRangeTypeCombo.SelectedIndex}">
              <TextBlock Text="from:"
                         VerticalAlignment="Center"/>
              <ui:NumberBox Grid.Column="1"
                            Value="{Binding TestRangeFrom}"
                            SpinButtonPlacementMode="Inline"/>

              <TextBlock Text="to:"
                         Margin="16, 0, 0, 0"
                         VerticalAlignment="Center"/>
              <ui:NumberBox Grid.Column="1"
                            Value="{Binding TestRangeTo}"
                            SpinButtonPlacementMode="Inline"/>
            </StackPanel>

            <TextBlock Grid.Row="2"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Text="Group by:"/>
            <ui:NumberBox Grid.Column="1"
                          Grid.Row="2"
                          Margin="24, 0, 0, 0"
                          Value="{Binding TestGrouping}"
                          SpinButtonPlacementMode="Inline"/>

            <TextBlock Grid.Row="4"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Text="Duration:"/>
            <ui:FAComboBox Grid.Column="1"
                           Grid.Row="4"
                           Margin="24, 0, 0, 0"
                           MinWidth="100"
                           SelectedIndex="{Binding TestDurationIndex}">
              <ui:FAComboBoxItem>10 sec</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>15 sec</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>30 sec</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>45 sec</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>1 min</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>2 min</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>3 min</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>4 min</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>5 min</ui:FAComboBoxItem>
            </ui:FAComboBox>

            <TextBlock Grid.Row="6"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Text="Shuffling:"/>
            <ui:FAComboBox Grid.Column="1"
                           Grid.Row="6"
                           Margin="24, 0, 0, 0"
                           MinWidth="100"
                           SelectedIndex="{Binding TestShufflingIndex}">
              <ui:FAComboBoxItem>Shuffle all</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>No shuffle</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>Only questions</ui:FAComboBoxItem>
              <ui:FAComboBoxItem>Only answers</ui:FAComboBoxItem>
            </ui:FAComboBox>

            <StackPanel Grid.Column="2"
                        Grid.Row="7"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal"
                        Spacing="8">
              <Button Content="Clear"
                      Command="{Binding ClearCommand}"/>
              <Button Content="Create"
                      Classes="accent"
                      Command="{Binding CreateCommand}"/>
            </StackPanel>
          </Grid>
        </Border>

        <!--Info panel-->
        <Border Grid.Row="3"
                CornerRadius="4"
                Margin="4, 4, 0, 0"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
          <TextBox Text="{Binding OverallInfo}"
                   Margin="8"
                   AcceptsReturn="True"
                   IsReadOnly="True"
                   TextWrapping="Wrap"
                   Watermark="Debug info"
                   Classes="clearButton"/>
        </Border>
      </Grid>
    </Grid>
    <ui:TeachingTip Name="InfoTip"
                    IconSource="i"
                    Title="Information"
                    Subtitle="\{0\} indicates automatic range"
                    Target="{Binding #InfoButton}"/>
  </Panel>

  <UserControl.Styles>
    <!--Multiline TextBox with clear button-->
    <Style Selector="TextBox.clearButton:focus:not(TextBox:empty)">
      <Setter Property="InnerRightContent">
        <Template>
          <Button Theme="{StaticResource TextBoxDeleteButtonStyle}"
                  Command="{Binding $parent[TextBox].Clear}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{DynamicResource ControlCornerRadius}"
                  Padding="{StaticResource HelperButtonThemePadding}"
                  IsTabStop="False"
                  Focusable="False"
                  FontSize="{TemplateBinding FontSize}"
                  Width="30"
                  Height="30"
                  VerticalAlignment="Top" />
        </Template>
      </Setter>
    </Style>
  </UserControl.Styles>
</UserControl>
